CREATE TABLE countries (
	code INTEGER PRIMARY KEY, 
	name VARCHAR (20) UNIQUE, 
	continent_name VARCHAR (20) NOT NULL
);

CREATE TABLE users (
	id INTEGER PRIMARY KEY, 
	full_name VARCHAR (20), 
	email VARCHAR (20) UNIQUE, 
	gender CHAR (1) CHECK (gender = 'M' or gender = 'F'), 
	date_of_birth VARCHAR (15), 
	created_at DATETIME, 
	country_code INTEGER REFERENCES countries (code) ON DELETE CASCADE
);

CREATE TABLE orders (
	id INTEGER PRIMARY KEY, 
	user_id INTEGER REFERENCES users (id) ON DELETE CASCADE, 
	status VARCHAR (6) CHECK (status = 'START' or status = 'FINISH'), 
	created_at DATETIME
);

CREATE TABLE products (
	id INTEGER PRIMARY KEY AUTOINCREMENT, 
	name VARCHAR (10) NOT NULL, 
	price INTEGER DEFAULT (0), 
	status VARCHAR (10) CHECK (status = 'VALID' or status = 'EXPIRED'), 
	created_at DATETIME
);

CREATE TABLE order_products (
	order_id REFERENCES orders (id) ON DELETE CASCADE, 
	product_id REFERENCES products (id) ON DELETE CASCADE, 
	quantity INTEGER DEFAULT (0)
);
